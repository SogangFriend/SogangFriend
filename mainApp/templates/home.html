<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>Title</title>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=6a63luu2nb"></script>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=6a63luu2nb&submodules=geocoder"></script>
</head>
<body>
    <div id="map" style=width:100%;height:400px;"></div>

    <form id="testForm">
        {{form}}
        <input type="button" onclick="coordToAddr()" value="myLoc"/>
    </form>
<script>

    var lat =37.3595704, lng = 127.105399;
    var mapOption = {
        center : new naver.maps.LatLng(lat, lng),
        zoom: 10
    };
    var map = new naver.maps.Map('map', mapOption);
    function coordToAddr() {
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position){
               lat = position.coords.latitude;
               lng = position.coords.longitude;
               moveCameraToCurrentLocation();
               naver.maps.Service.reverseGeocode({
                   coords: new naver.maps.LatLng(lat, lng),
               }, function (status, response) {
                   if(status !== naver.maps.Service.Status.OK) {
                       return alert("Something wrong!");
                   }
                   var str = JSON.stringify(response, null, 2);
                   var result = response.v2.results;
                   var items = result[0];
                   var region = items.region;
                   var addr = region.area1.name + " " + region.area2.name + " " + region.area3.name + " " + region.area4.name;
                   console.log(str);
                   document.getElementById("id_location").value = addr;
               });
            }, function (error){
                console.error(error);
            }, {
                enableHighAccuracy: true,
                maximumAge:0,
                timeout: Infinity
            });
        } else {
            alert('GPS NOT SUPPORTED');
        }

    }

    function moveCameraToCurrentLocation() {
        var cur = new naver.maps.LatLng(lat, lng);
        var marker = new naver.maps.Marker({
            position: cur,
            map: map
        })
        map.setCenter(cur);
        map.setZoom(18);
    }


</script>
</body>
</html>